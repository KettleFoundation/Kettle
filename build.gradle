buildscript {
    ext.kotlin_version = '1.2.20'

    repositories {
        jcenter()
        maven {
            name = "Forge"
            url = "http://files.minecraftforge.net/maven"
        }
        maven {
            name = 'prok'
            url = 'https://djoveryde.000webhostapp.com/kcauldron/files/'
        }
        maven {
            name = 'spigot'
            url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
        }
        maven {
            name = 'destroystokyo-repo'
            url = 'https://repo.destroystokyo.com/content/repositories/snapshots/'
        }
	flatDir {
            dirs 'libs'
        }
        mavenCentral()
        mavenLocal()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath 'net.minecraftforge.gradle:ForgeGradle:2.3-SNAPSHOT'
        //classpath 'com.destroystokyo.paper:paper-api:1.12.2-R0.1-SNAPSHOT'
        // unbreak
        classpath 'org.bukkit:bukkit:1.12.2-R0.1-SNAPSHOT'
        classpath 'org.luaj:luaj-jse:3.0.1'
        //libraries fileTree(dir: "libs", include: "*.jar")
    }
}

group 'me.aolko.kettle'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'kotlin'

sourceCompatibility = 1.8

repositories {
    clear()
    maven {
        name 'Forge'
        url 'http://files.minecraftforge.net/maven'
    }
    maven {
        name 'Tethys (drakon.io)'
        url 'https://tethys.drakon.io/maven'
    }
    maven {
        name 'prok'
        url 'https://djoveryde.000webhostapp.com/kcauldron/files/'
    }
    maven {
        name 'spigot'
        url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
    }
    maven {
		name 'spigotmc-public'
		url 'https://hub.spigotmc.org/nexus/content/groups/public/'
	  }
    maven {
        name 'destroystokyo-repo'
        url 'https://repo.destroystokyo.com/content/repositories/snapshots/'
    }
    flatDir {
        dirs 'libs'
    }
    mavenCentral()
    mavenLocal()
}

apply plugin: 'net.minecraftforge.gradle.forge'
apply plugin: 'kotlin'
apply plugin: 'idea'

configurations {
    shade
    compile.extendsFrom shade
}

dependencies {
    shade('org.bukkit:bukkit:1.12.2-R0.1-SNAPSHOT'){
		exclude group: 'com.google.guava'
		exclude group: 'com.google.code.gson'
		exclude group: 'junit'
	}
    compile 'net.md-5:SpecialSource:1.8.1'
    compile 'org.luaj:luaj-jse:3.0.1'
    compile 'pw.prok:KImagine:0.2.0'
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
    testCompile group: 'junit', name: 'junit', version: '4.12'
    compile fileTree(dir: "libs", include: "*.jar")
}

minecraft {
    version = "$MC_VER-$FORGE_VER"
    mappings = MAPPINGS_VER
    runDir = 'run'
    replace '@VERSION@', MOD_VER
    replace '@KOTLIN@', KOTLIN_VER
}

reobf {
    jar {
        // Repackage PK lines are in repack.srg
        extraFiles file("repack.srg")
    }
}


compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
